<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">
<f:metadata>
    <f:viewParam name="flightId" value="#{flightBean.flightId}" required="true"/>
    <f:event type="preRenderView" listener="#{flightBean.loadFlightData()}"/>
</f:metadata>
<h:body>
    <h2>Flight:</h2>
    <p>ID: #{flightBean.flight.id}</p>
    <p>Flight path: #{flightBean.flight.departure} #{flightBean.flight.destination}</p>
    <h:panelGroup rendered="#{flightBean.flight.airline != null}">
        <p>Airline: #{flightBean.flight.airline.name}</p>
    </h:panelGroup>
    <h:panelGroup rendered="#{not empty flightBean.flight.passengers}">
        <h3>Passenger:</h3>
        <ul>
            <ui:repeat value="#{flightBean.flight.passengers}" var="passenger">
                <li><h:link value="#{passenger.firstName}" outcome="passengerManagement?passengerId=#{passenger.id}" /> - #{passenger.lastName}</li>
            </ui:repeat>
        </ul>
    </h:panelGroup>
    <h:link outcome="index" value="Back to index"/>
</h:body>
</html>
